import{r as v,j as e,H as G}from"./index-CI4cxtVx.js";const y=["R","T1","T2","I"],A={R:"Reproductie",T1:"Toepassingsniveau 1",T2:"Toepassingsniveau 2",I:"Inzicht"},D=()=>{const f=Array.from({length:20},(x,m)=>{const d=y[Math.floor(Math.random()*y.length)],l=Math.floor(Math.random()*4)+1;return{id:m+1,title:`Vraag ${m+1}`,category:d,maxScore:l,mostGivenAnswer:`Antwoord ${String.fromCharCode(65+Math.floor(Math.random()*4))}`,correctPercentage:Math.floor(Math.random()*50)+50}}),n=["Sanne de Vries","Mohammed El Amrani","Daan Bakker","Fatima Yilmaz","Lieke van Dijk","Jayden Jansen","Fleur de Boer","Bram Visser","Aisha Özdemir","Thomas Mulder","Elin Zhang","Noah van der Meer","Sofia Rodriguez","Sam de Groot","Noor van Leeuwen"].map((x,m)=>{let d=0,l=0;const j=f.map(c=>{const g=Math.floor(Math.random()*(c.maxScore+1));return d+=g,l+=c.maxScore,{questionId:c.id,score:g,maxScore:c.maxScore,answer:`Antwoord ${String.fromCharCode(65+Math.floor(Math.random()*4))}`,correct:g===c.maxScore}}),h=d/l*100,r=Math.max(1,Math.min(10,h/100*9+1)).toFixed(1);return{id:m+1,name:x,questionScores:j,totalScore:d,maxPossibleScore:l,grade:r}});return{questions:f,students:n}},L=(f,b)=>y.map(x=>{const m=f.filter(r=>r.category===x),d=m.reduce((r,c)=>r+c.maxScore,0),j=b.reduce((r,c)=>{const g=c.questionScores.filter(p=>m.some(N=>N.id===p.questionId));return r+g.reduce((p,N)=>p+N.score,0)},0)/b.length,h=d>0?j/d*100:0;return{category:x,fullName:A[x],questionCount:m.length,maxPossibleScore:d,averageScore:j.toFixed(1),averagePercentage:h.toFixed(1)}}),z=()=>{const[f,b]=v.useState(null),[n,x]=v.useState(null),[m,d]=v.useState("rapportage"),[l,j]=v.useState({key:"grade",direction:"desc"});if(v.useEffect(()=>{const s=D(),t=L(s.questions,s.students);b({...s,rttiStats:t})},[]),!f)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:"Laden..."});const{questions:h,students:r,rttiStats:c}=f,g=(r.reduce((s,t)=>s+parseFloat(t.grade),0)/r.length).toFixed(1),p=h.reduce((s,t)=>s+t.maxScore,0),N=parseFloat((r.reduce((s,t)=>s+t.totalScore,0)/r.length).toFixed(1)),T=(N/p*100).toFixed(1),S={R:"#4169E1",T1:"#FF6347",T2:"#32CD32",I:"#FFD700"},w=(s,t)=>{const a=h.filter(o=>o.category===t);if(a.length===0)return 0;const u=s.questionScores.filter(o=>{const i=h.find(P=>P.id===o.questionId);return i&&i.category===t&&o.correct}).length;return Math.round(u/a.length*100)},F=[...r].sort((s,t)=>{const{key:a,direction:u}=l;let o=s[a],i=t[a];return["R","T1","T2","I"].includes(a)?(o=w(s,a),i=w(t,a)):a==="grade"?(o=parseFloat(s.grade),i=parseFloat(t.grade)):a==="totalScore"?(o=s.totalScore,i=t.totalScore):a==="name"&&(o=s.name.toLowerCase(),i=t.name.toLowerCase()),o<i?u==="asc"?-1:1:o>i?u==="asc"?1:-1:0}),C=s=>{j(t=>t.key===s?{key:s,direction:t.direction==="asc"?"desc":"asc"}:{key:s,direction:"desc"})},k=()=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 transform hover:scale-105 transition-transform",children:[e.jsx("h3",{className:"text-gray-500 font-medium mb-1",children:"Gemiddeld cijfer"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-5xl font-bold text-blue-600",children:g}),e.jsx("span",{className:"text-gray-500 ml-2 mb-1",children:"/ 10"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"text-sm text-gray-600",children:parseFloat(g)>=5.5?`${Math.round(r.filter(s=>parseFloat(s.grade)>=5.5).length/r.length*100)}% voldoendes`:`${Math.round(r.filter(s=>parseFloat(s.grade)<5.5).length/r.length*100)}% onvoldoendes`})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 transform hover:scale-105 transition-transform",children:[e.jsx("h3",{className:"text-gray-500 font-medium mb-1",children:"Gemiddelde score"}),e.jsxs("div",{className:"flex items-end",children:[e.jsx("span",{className:"text-5xl font-bold text-green-600",children:N}),e.jsxs("span",{className:"text-gray-500 ml-2 mb-1",children:["/ ",p," punten"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${T}%`}})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 transform hover:scale-105 transition-transform",children:[e.jsx("h3",{className:"text-gray-500 font-medium mb-1",children:"Percentage behaald"}),e.jsx("div",{className:"flex items-end",children:e.jsxs("span",{className:"text-5xl font-bold text-purple-600",children:[T,"%"]})}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Hoogste individuele score: ",Math.max(...r.map(s=>s.totalScore/s.maxPossibleScore*100)).toFixed(1),"%"]})})]})]}),M=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"RTTI Categorieën"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:c.map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold mr-3 text-lg",style:{backgroundColor:S[s.category]},children:s.category}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:s.fullName}),e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[s.questionCount," ",s.questionCount===1?"vraag":"vragen"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Gemiddelde score:"}),e.jsxs("span",{className:"text-sm font-bold",children:[s.averageScore," / ",s.maxPossibleScore]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"h-4 rounded-full transition-all duration-500",style:{width:`${s.averagePercentage}%`,backgroundColor:S[s.category]}})}),e.jsxs("p",{className:"text-sm mt-1 text-right font-semibold",children:[s.averagePercentage,"%"]})]})]},s.category))})]}),$=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 h-full",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-800",children:"Leerlingen"}),e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"sticky top-0 bg-white",children:e.jsxs("tr",{className:"bg-gray-100 rounded-md",children:[e.jsxs("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700 cursor-pointer",onClick:()=>C("name"),children:["Naam ",l.key==="name"&&(l.direction==="asc"?"▲":"▼")]}),e.jsxs("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700 cursor-pointer",onClick:()=>C("grade"),children:["Cijfer ",l.key==="grade"&&(l.direction==="asc"?"▲":"▼")]}),y.map(s=>e.jsxs("th",{className:"py-2 px-4 text-left text-sm font-semibold text-gray-700 cursor-pointer",onClick:()=>C(s),children:[s," ",l.key===s&&(l.direction==="asc"?"▲":"▼")]},s))]})}),e.jsx("tbody",{children:F.map(s=>e.jsxs("tr",{className:`border-b hover:bg-gray-50 cursor-pointer transition-colors ${n&&n.id===s.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,onClick:()=>x(s),children:[e.jsx("td",{className:"py-3 px-4",children:s.name}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`font-bold py-1 px-2 rounded-md text-white ${parseFloat(s.grade)>=5.5?"bg-green-500":"bg-red-500"}`,children:s.grade})}),y.map(t=>{const a=w(s,t);return e.jsx("td",{className:"py-3 px-4 min-w-[90px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${a}%`,backgroundColor:S[t]}})}),e.jsxs("span",{className:"text-xs font-medium",children:[a,"%"]})]})},t)})]},s.id))})]})]}),I=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?`Vragen - ${n.name}`:"Vragen - Klasgemiddelde"}),n&&e.jsxs("button",{className:"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 text-blue-600 px-4 py-2 rounded-md text-sm font-medium transition-colors",onClick:()=>x(null),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Terug naar klasoverzicht"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:h.map(s=>{const t=n?n.questionScores.find(u=>u.questionId===s.id):{score:(r.reduce((u,o)=>u+o.questionScores.find(i=>i.questionId===s.id).score,0)/r.length).toFixed(1),answer:s.mostGivenAnswer,correct:!1},a=parseFloat((t.score/s.maxScore*100).toFixed(0));return e.jsxs("div",{className:"bg-white rounded-lg border hover:shadow-md transition-shadow p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold",children:s.title}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-md text-white font-bold",style:{backgroundColor:S[s.category]},children:s.category})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Score:"}),e.jsx("span",{className:"text-sm font-bold",children:n?`${t.score} / ${s.maxScore}`:`Gem: ${t.score} / ${s.maxScore}`})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${a>70?"bg-green-500":a>40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${a}%`}})})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"Antwoord:"}),e.jsx("span",{children:t.answer})]}),n&&e.jsxs("div",{className:`flex justify-between text-sm ${t.correct?"text-green-600":"text-red-600"}`,children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{children:t.correct?"✓ Correct":"✗ Incorrect"})]}),!n&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:"% Correct:"}),e.jsxs("span",{children:[s.correctPercentage,"%"]})]})]})]},s.id)})})]}),R=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-1/2 xl:w-2/5",children:$()}),e.jsx("div",{className:"lg:w-1/2 xl:w-3/5",children:I()})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(G,{currentTab:m,setCurrentTab:d}),e.jsxs("main",{className:"w-full px-4 py-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"RTTI Rapportage"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Overzicht van toetsresultaten"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"RTTI Toets"}),e.jsx("div",{className:"bg-blue-100 rounded-md px-3 py-1",children:e.jsx("span",{className:"text-blue-800 font-medium",children:"Hoofdstuk 5"})})]})]}),!n&&k(),!n&&M(),e.jsx("div",{className:"mt-8",children:R()})]})]})};export{z as default};
